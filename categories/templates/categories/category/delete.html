{% extends "ledger/base.html" %}
{% load i18n %}


{% block breadcrumbs %}
<li><a href="{% url "dashboard" %}">{% trans "Dashboard" %}</a></li>
<li><a href="{% url "categories:categories" %}">{% trans "Categories" %}</a></li>
<li><a href="{% url "categories:category" category.slug %}">{{ category.name }}</a></li>
<li class="active">{% trans "Delete" %}</li>
{% endblock %}


{% block content %}
<div class="row">
    <div class="col-md-6 col-md-offset-3">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h1 class="panel-title">{% trans "Delete category" %}</h1>
            </div>
            <div class="panel-body">
                {{ form.media }}
                <form action="{% url "categories:category_delete" category.slug %}" method="post" class="form">
                    {% csrf_token %}
                    <div class="alert alert-danger" role="alert">
                        <h5><b>{% trans "Confirm deletion" %}</b></h5>
                        <p>{% blocktrans %}Are you sure you want to delete this category? All of the following objects and their related items will be deleted:{% endblocktrans %}</p>
                        <p></p>

                        <ul>
                            <li>
                                {% trans "Category" %}: <a href="{% url "categories:category" category.slug %}">{{ category.name }}</a>
                                {% if category.accounts %}
                                    <ul>
                                        {% for account in category.accounts.all %}
                                            <li>
                                                {% trans "Account" %}: <a href="{% url "accounts:account" account.slug %}">{{ account.name }}</a>
                                                <ul>
                                                    {% for entry in account.entries.all %}
                                                        <li>{% trans "Entry" %}: <a href="{% url "accounts:entry" entry.id %}">{{ entry.account.name }} - #{{ entry.serial_number }} ({{ entry.day|date:"D., d. F Y" }})</a></li>
                                                    {% endfor %}
                                                </ul>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                {% endif %}
                                {% if category.entries %}
                                    <ul>
                                        {% for entry in category.entries.all %}
                                            <li>{% trans "Entry" %}: <a href="{% url "accounts:entry" entry.id %}">{{ entry.account.name }} - #{{ entry.serial_number }} ({{ entry.day|date:"D., d. F Y" }})</a></li>
                                        {% endfor %}
                                    </ul>
                                {% endif %}
                            </li>
                        </ul>
                        <br/>
                        <button class="btn btn-danger" type="submit">{% blocktrans %}Yes, I'm sure{% endblocktrans %}</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock%}
