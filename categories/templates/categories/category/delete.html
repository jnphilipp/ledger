{% extends 'ledger/base.html' %}
{% load i18n %}


{% block breadcrumbs %}
<li><a href="{% url 'dashboard' %}">{% trans 'dashboard' %}</a></li>
<li><a href="{% url 'categories:categories' %}">{% trans 'categories' %}</a></li>
<li><a href="{% url 'categories:category' category.slug %}">{{ category.name|lower }}</a></li>
<li class="active">{% trans 'delete' %}</li>
{% endblock %}


{% block content %}
<div class="row">
    <div class="col-md-6 col-md-offset-3">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h1 class="panel-title">{% trans 'delete' %} {{ category.name|lower }}</h1>
            </div>
            <div class="panel-body">
                {{ form.media }}
                <form action="{% url 'categories:category_delete' category.slug %}" method="post" class="form">
                    {% csrf_token %}
                    <div class="alert alert-danger" role="alert">
                        <h5><b>{% trans 'confirm deletion' %}</b></h5>
                        <p>{% blocktrans %}are you sure you want to delete this category? all of the following objects and their related items will be deleted:{% endblocktrans %}</p>
                        <p></p>

                        <ul>
                            <li>
                                {% trans 'category' %}: <a href="{% url 'categories:category' category.slug %}">{{ category.name|lower }}</a>
                                {% if category.accounts %}
                                    <ul>
                                        {% for account in category.accounts.all %}
                                            <li>
                                                {% trans 'account' %}: <a href="{% url 'accounts:account' account.slug %}">{{ account.name|lower }}</a>
                                                <ul>
                                                    {% for entry in account.entries.all %}
                                                        <li>entry: <a href="{% url 'accounts:entry' entry.id %}">{{ entry.account.name|lower }} - #{{ entry.serial_number }} ({{ entry.day|date:'D., d. F Y' }})</a></li>
                                                    {% endfor %}
                                                </ul>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                {% endif %}
                                {% if category.entries %}
                                    <ul>
                                        {% for entry in category.entries.all %}
                                            <li>entry: <a href="{% url 'accounts:entry' entry.id %}">{{ entry.account.name|lower }} - #{{ entry.serial_number }} ({{ entry.day|date:'D., d. F Y' }})</a></li>
                                        {% endfor %}
                                    </ul>
                                {% endif %}
                            </li>
                        </ul>
                        <br/>
                        <button class="btn btn-danger" type="submit">{% blocktrans %}yes, i'm sure{% endblocktrans %}</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock%}
