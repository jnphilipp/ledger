{% extends "ledger/base.html" %}
{% load i18n %}

{% block breadcrumbs %}
<li><a href="{% url 'dashboard' %}">dashboard</a></li>
<li><a href="{% url 'account' account.slug %}">{{ account.name|lower }}</a></li>
<li><a href="{% url 'account_entries' account.slug %}">entries</a></li>
<li>{% if entry.id %}edit entry{% else %}add entry{% endif %}</li>
{% endblock %}

{% block content %}
<script>
	$(function() {
		$('#id_day').datepicker({dateFormat:'yy-mm-dd'});
	});
</script>
{{ form.media }}


<div class="row">
	<div class="col-md-6 col-md-offset-3">
		<div class="shape shapeform">
			<div class="title">{% if entry.id %}change entry{% else %}add entry{% endif %}</div>
			<div class="content">
				<form action="{% if entry.id %}{% url 'entry_change' account.slug entry.id %}{% else %}{% url 'entry_add' account.slug %}{% endif %}" method="post" class="form-horizontal">
					{% csrf_token %}

					{% for field in form %}
						<div class="form-group{% if form.errors %} {{ field.errors|yesno:'has-error,has-success' }}{% endif %}">
							<label class="col-sm-3 control-label{% if field.field.required %} required{% endif %}" for="{{ field.auto_id }}">{{ field.label|lower }}:</label>
							<div class="col-sm-7">
								{{ field }}
								<span class="help-block">{{ field.help_text|lower }}</span>
								<span class="help-block">{{ field.errors|lower }}</span>
							</div>
							<div class="col-sm-2">
								{% if field.auto_id == 'id_day' %}
									<a id="date_today" style="cursor: pointer;">today</a>
									<script>
										$('#date_today').click(function() {
											$('#id_day').val('{{ today|date:'Y-m-d' }}');
											$('#id_amount').focus();
											return false;
										});
									</script>
								{% endif %}
							</div>
						</div>
					{% endfor %}

					<div class="form-group">
						<div class="col-sm-offset-3 col-sm-9">
							<button class="btn btn-primary" name="_add_account" value="_add_account" type="submit">save</button>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
{% endblock%}